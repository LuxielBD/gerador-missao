<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gerador Ordo Realitas</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#1f2937" />
  <style>
    body { font-family: Arial, sans-serif; background:#111827; color:#e5e7eb; margin:0; padding:20px; }
    h1,h2 { color:#f9fafb; }
    .card { background:#1f2937; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 4px 10px rgba(0,0,0,.4); }
    button { background:#2563eb; border:none; padding:12px 18px; color:white; border-radius:8px; cursor:pointer; font-size:16px; }
    button:hover { background:#1d4ed8; }
    .story { font-size:18px; line-height:1.5; }
    .highlight { color:#93c5fd; font-weight:bold; }
  </style>
</head>
<body>
  <h1>Gerador de Miss√µes ‚Äì Ordo Realitas</h1>

  <div class="card">
    <button onclick="gerarHistoria()">üé≤ Gerar Miss√£o Autom√°tica</button>
  </div>

  <div class="card story" id="historia">
    Clique no bot√£o para gerar uma miss√£o.
  </div>

  <div class="card" id="detalhes">
    <h2>Detalhes Revelados</h2>
    <div id="detalhesTexto">Nenhum detalhe revelado ainda.</div>
  </div>

  <script>
    const tabelas = {
      sujeito: [
        'um inocente curioso',
        'um criminoso',
        'uma pessoa influente',
        'um bando cultista',
        'um cultista independente',
        'um ex-agente da Ordo Realitas',
        'um item amaldi√ßoado',
        'uma criatura paranormal poderosa'
      ],
      acao: [
        'est√° invocando uma criatura de prop√≥sito',
        'invocou uma criatura sem querer',
        'est√° sequestrando inocentes',
        'est√° assassinando inocentes',
        'usa um item amaldi√ßoado para cometer crimes',
        'est√° recrutando cultistas',
        'est√° pesquisando um ritual perigoso',
        'est√° coletando itens amaldi√ßoados',
        'mudou a mente de algu√©m da Ordo Realitas',
        'est√° envolvido em m√∫ltiplas atividades suspeitas'
      ],
      local: [
        'uma escola', 'um hospital', 'um vilarejo', 'uma fazenda', 'uma mata fechada',
        'becos de uma metr√≥pole', 'um arranha-c√©u', 'uma grande loja de departamento',
        'um esgoto', 'uma zona industrial decadente', 'um shopping center', 'um orfanato',
        'um museu', 'um cemit√©rio', 'uma delegacia ou base militar', 'uma mans√£o',
        'a antiga sede da Ordo Realitas', 'um navio', 'uma ilha remota', 'uma rua deserta'
      ],
      amigo: [
        'um civil alheio ao paranormal',
        'um civil exposto ao paranormal',
        'um antigo conhecido dos agentes',
        'um ocultista da Ordo Realitas'
      ],
      objeto: [
        'um equipamento especial',
        'um ingrediente para ritual',
        'um equipamento modificado',
        'um artefato raro da Ordo Realitas'
      ],
      evento: [
        'o aparecimento de uma criatura paranormal',
        'a chegada de refor√ßos inimigos',
        'o uso inesperado de um poder paranormal',
        'civis se revoltando contra os agentes',
        'a revela√ß√£o de que o aliado era o vil√£o',
        'a descoberta de que as a√ß√µes do inimigo eram justificadas',
        'a perda de equipamentos importantes',
        'a necessidade urgente de proteger um civil',
        'a perda de comunica√ß√£o com a Ordo Realitas',
        'a interfer√™ncia de autoridades locais',
        'um desastre em larga escala',
        'o aparecimento de um antigo inimigo'
      ]
    };

    function rolar(lista) {
      return lista[Math.floor(Math.random() * lista.length)];
    }

    function gerarHistoria() {
      const sujeito = rolar(tabelas.sujeito);
      const acao = rolar(tabelas.acao);
      const local = rolar(tabelas.local);
      const amigo = rolar(tabelas.amigo);
      const objeto = rolar(tabelas.objeto);
      const evento = rolar(tabelas.evento);

      const texto = `
        Um(a) <span class="highlight">${sujeito}</span> 
        <span class="highlight">${acao}</span> em um(a) 
        <span class="highlight">${local}</span>. Durante a investiga√ß√£o, o grupo ter√° a ajuda de 
        <span class="highlight">${amigo}</span> e poder√° encontrar 
        <span class="highlight">${objeto}</span>. Por√©m, em determinado momento, os agentes ser√£o surpreendidos por 
        <span class="highlight">${evento}</span>.
      `;

      document.getElementById('historia').innerHTML = texto;

      gerarDetalhes({ sujeito, local, amigo, objeto });
    }</span> 
        <span class="highlight">${acao}</span> em um(a) 
        <span class="highlight">${local}</span>. Durante a investiga√ß√£o, o grupo ter√° a ajuda de 
        <span class="highlight">${amigo}</span> e poder√° encontrar 
        <span class="highlight">${objeto}</span>. Por√©m, em determinado momento, os agentes ser√£o surpreendidos por 
        <span class="highlight">${evento}</span>.
      `;

      document.getElementById('historia').innerHTML = texto;
    }

    function gerarDetalhes(resultados) {
      let detalhes = [];

      // Criatura / Sujeito
      if (resultados.sujeito.includes('criatura')) {
        const elemento = rolar(['Sangue', 'Morte', 'Conhecimento', 'Energia']);
        detalhes.push(`A criatura possui afinidade com o elemento <strong>${elemento}</strong>.`);
      }

      // Local ‚Äì Escola
      if (resultados.local.includes('escola')) {
        const estado = rolar(['abandonada', 'habitadas por civis', 'ocupada por cultistas']);
        detalhes.push(`A escola est√° <strong>${estado}</strong>.`);
      }

      // Objeto
      if (resultados.objeto.includes('equipamento')) {
        const tipoEquip = rolar([
          'um dispositivo de conten√ß√£o paranormal',
          'uma arma experimental da Ordo',
          'um artefato de prote√ß√£o ritual√≠stica'
        ]);
        detalhes.push(`O equipamento encontrado √© ${tipoEquip}.`);
      }

      // Amigo ‚Äì Agente
      if (resultados.amigo.includes('Ordo')) {
        const status = rolar(['em atividade', 'aposentado', 'afastado por suspeita']);
        mentions = rolar(['conhece bem o local', 'tem informa√ß√µes confidenciais', 'esconde algo importante']);
        detalhes.push(`O agente est√° <strong>${status}</strong> e ${mentions}.`);
      }

      document.getElementById('detalhesTexto').innerHTML = detalhes.length
        ? detalhes.join('<br><br>')
        : 'Nenhum detalhe adicional foi revelado nesta rolagem.';
    }

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js');
    }
  </script>
</body>
</html>
